<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../component/ayd-datatable.html">
<link rel="import" href="../mixin/ayd-firebase.html">
<link rel="import" href="pf-transactions-form.html">

<dom-module id="pf-transactions">
  <template>
    <style>
      paper-fab {
        position: fixed;
        bottom: 24px;
        right: 24px;
        --paper-fab-background: var(--accent-color);
      }
    </style>
    
    <ayd-datatable
      id="datatable"
      data="{{data}}"
      selected-data="{{selectedData}}"
      fields="[[fields]]">
    </ayd-datatable>

    <pf-transactions-form
      id="form"
      opened="{{formOpened}}"
      on-push="_onPush">
    </pf-transactions-form>

    <paper-fab icon="icons:add" on-tap="_onFabTapped"></paper-fab>

  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class PfTransactions extends Aydin.FirebaseMixin(Polymer.Element) {

      ready() {
        super.ready();
        this.bindNode('transactions', 'data');
      }
      
      static get is() { 
        return 'pf-transactions';
      }
      
      static get properties() {
        return {
          title: {
            type: String,
            value: "All Transactions",
          },
          selectedData: {
            type: Array,
            notify: true
          },
          formOpened: {
            type: Boolean,
            value: false,
            notify: true
          },
          data: {
            type: Array,
            value: () => [],
            notify: true
          },
          fields: {
            type: Array,
            value: () => ({
              'date': 'Date',
              'description': 'Description',
              'amount': 'Amount'
            }),
            readOnly: true
          }
        };
      }

      _onFabTapped() {
        this.set('formOpened', true);
      }

    }

    window.customElements.define(PfTransactions.is, PfTransactions);
  </script>
</dom-module>
